---
title: "Reading Data"
format: html
editor: visual
editor_options: 
  chunk_output_type: console
---

## Reading a 'csv' File 
```{r}
library(readr)
air_quality_data <- 
  read_csv("https://www4.stat.ncsu.edu/online/datasets/AirQuality.csv")
air_quality_data
air_quality_data$`CO(GT)`[1:10]
```

## Reading in a Fixed Width Field (FWF)
```{r}
read_fwf("https://www4.stat.ncsu.edu/~online/datasets/cigarettes.txt",
         fwf_widths(c(17, 5, 9, 7, 4),
                    c("brand", "tar", "nicotine", "weight", "co")),
         skip = 1)
```

## Reading Excel Data
```{r}
library(readxl)
dry_bean_data <- read_excel("Dry_Bean_Dataset.xlsx")
dry_bean_data
```

Reading From a Particular Sheet
```{r}
excel_sheets("Dry_Bean_Dataset.xlsx")
```

We can pull in data drom a specific sheet with the name or via integers (or NULL for 1st)
```{r}
citation_dry_bean_data <- read_excel("Dry_Bean_Dataset.xlsx",
                                     sheet = excel_sheets("Dry_Bean_Dataset.xlsx")[2],
                                     col_names = FALSE)
citation_dry_bean_data

## to print it out nicely
cat(dplyr::pull(citation_dry_bean_data,1))
```

Reading only specific cells - cells must be in a continuous range
```{r}
dry_bean_range <- read_excel("Dry_Bean_Dataset.xlsx",
                             range = cell_cols("A:B")
)
dry_bean_range
```


##Coercing a Data Frame to a Tibble

load dplyr package
```{r}
library(dplyr)
```

load Lahman package 
```{r}
library(Lahman)
batting_tbl <- as_tibble(Batting)
batting_tbl
```

## Row Manipulations with dplyr
```{r}
filter(batting_tbl, G > 50)
```

Chaining
```{r}
batting_tbl |>
  filter(G > 50 & yearID == 2018) #could also write filter(G > 50, yearID == 2018)
```

To do and condition using %in%
```{r}
batting_tbl |>
  filter(G > 50, yearID %in% c(2018, 2019, 2020))
```

to do the or condition 
```{r}
batting_tbl |>
  filter(G > 100 | yearID %in% c(2018, 2019, 2020))
```

using arrange() function 
```{r}
batting_tbl |>
  filter(G > 100, yearID %in% c(2018, 2019, 2020)) |>
  arrange(desc(teamID), playerID)
```

